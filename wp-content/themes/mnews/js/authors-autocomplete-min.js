function authors_autocomplete_mb_stop_loading_spinner(){jQuery("input#authors_autocomplete_mb_post_author").removeClass("ui-autocomplete-loading")}function authors_autocomplete_mb_remove_error_message(){jQuery("#authors_autocomplete_mb_error_message").remove()}function authors_autocomplete_mb_add_error_message(e){authors_autocomplete_mb_remove_error_message();var o=jQuery('<div id="authors_autocomplete_mb_error_message">'+e+"</div>");jQuery("input#authors_autocomplete_mb_post_author").after(o)}function authors_autocomplete_mb_change_post_author(e,o){var t=jQuery("#authors_autocomplete_mb_post_author_override_user_id"),a=jQuery("#authors_autocomplete_mb_post_author_override_display_name");if(e>0&&t.val()!=e){t.val(e),a.val(o);var _=jQuery("#authors_autocomplete_mb_post_author_gravatar");jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"html",data:{action:"authors_autocomplete_mb_get_user_gravatar",authors_autocomplete_mb_user_id:e,authors_autocomplete_mb_gravatar_size:parseInt(_.css("width"))},success:function(e){_.html(e)},error:function(){_.hide()}})}}jQuery.noConflict()(function(){var e=0;jQuery("#post_ID").length>0&&(e=jQuery("#post_ID").val());var o="";jQuery("#post_type").length>0&&(o=jQuery("#post_type").val()),jQuery("table#authors_autocomplete_mb_autocomplete").each(function(){var t=jQuery("input#authors_autocomplete_mb_post_author");jQuery("#authors_autocomplete_mb_dropdown").remove(),t.size()>0&&(t.autocomplete({delay:100,minLength:1,source:function(t,a){jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"authors_autocomplete_mb_autocomplete_callback",authors_autocomplete_mb_search_term:t.term,authors_autocomplete_mb_post_id:e,authors_autocomplete_mb_post_type:o},success:function(e){a(jQuery.map(e,function(e){return{user_id:e.user_id,user_login:e.user_login,display_name:e.display_name,email:e.email,value:e.label,label:e.label}}))}})},search:function(e,o){authors_autocomplete_mb_remove_error_message()},select:function(e,o){authors_autocomplete_mb_stop_loading_spinner(),authors_autocomplete_mb_remove_error_message(),authors_autocomplete_mb_change_post_author(o.item.user_id,o.item.display_name)},response:function(e,o){authors_autocomplete_mb_stop_loading_spinner()},focus:function(e,o){authors_autocomplete_mb_stop_loading_spinner(),authors_autocomplete_mb_remove_error_message()},close:function(e,o){authors_autocomplete_mb_stop_loading_spinner()},change:function(a,_){authors_autocomplete_mb_stop_loading_spinner(),authors_autocomplete_mb_remove_error_message();var r=jQuery("#authors_autocomplete_mb_post_author_override_display_name").val();if(""==t.val())t.val(r);else{var u=t.val();jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"authors_autocomplete_mb_if_user_exists_by_value",authors_autocomplete_mb_user_value:u,authors_autocomplete_mb_post_id:e,authors_autocomplete_mb_post_type:o},success:function(e){e.ID?(t.val(e.display_name),authors_autocomplete_mb_change_post_author(e.ID,e.display_name)):(t.val(r),e.notallowed?authors_autocomplete_mb_add_error_message(e.notallowed):e.doesnotexist&&authors_autocomplete_mb_add_error_message(e.doesnotexist))}})}}}).data("ui-autocomplete")._renderItem=function(e,o){return jQuery("<li>").append("<a><strong>"+o.display_name+"</strong><br />Username: <em>"+o.user_login+"</em><br />E-mail: <em>"+o.email+"</em></a>").appendTo(e)},t.on("focus",function(e,o){authors_autocomplete_mb_stop_loading_spinner(),authors_autocomplete_mb_remove_error_message()}))})});